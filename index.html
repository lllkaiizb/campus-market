<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>校园二手市场</title>
</head>
<body>
  <h1>商品展示</h1>
  <div id="products">加载中...</div>

  <script>
    // TODO: 替换成你自己的 Apps Script 部署 URL
    const API_URL = "https://script.google.com/macros/s/AKfycbz9v4B-msPtZwr61MdgMe_-aj2JIrSN53s47_ImKhXOxm8JpKyrOMl6oykhoGB45Ixv/exec";

    async function loadProducts() {
      try {
        const res = await fetch(API_URL);
        const products = await res.json();
        const container = document.getElementById("products");
        container.innerHTML = "";
        products.forEach(p => {
          const div = document.createElement("div");
          div.innerHTML = `
            <h3>${p.name}</h3>
            <p>${p.description}</p>
            <img src="${p.image}" width="150">
            <p>价格: ${p.price}</p>
            <p>联系方式: ${p.contact}</p>
            <p>地点: ${p.location}</p>
          `;
          container.appendChild(div);
        });
      } catch (err) {
        document.getElementById("products").innerText = "加载失败: " + err.message;
      }
    }

    loadProducts();
  </script>
</body>
</html>
